{% for reclamation in pagination %}
<tr class="admin-table-row">
    <td><span class="text-xs font-weight-bold text-secondary">#{{ reclamation.id }}</span></td>
    <td>
        <div class="font-weight-bold text-dark">{{ reclamation.titre|u.truncate(40) }}</div>
        <div class="text-xs text-secondary">{{ reclamation.categorie|default('Sans catégorie') }}</div>
    </td>
    <td>
        <div>{{ reclamation.nom }}</div>
        <div class="text-xs text-secondary">{{ reclamation.email }}</div>
    </td>
    <td>
        <div class="text-xs"><i class="far fa-calendar-alt mr-1"></i> {{ reclamation.dateCreation ? reclamation.dateCreation|date('d M Y') : '' }}</div>
        <div class="text-xs text-secondary">{{ reclamation.dateCreation ? reclamation.dateCreation|date('H:i') : '' }}</div>
    </td>
    <td>
        {% set status_class = {
            'en_attente': 'warning',
            'en_cours': 'info',
            'resolue': 'success',
            'cloturee': 'secondary'
        } %}
        {% set status_label = {
            'en_attente': 'En attente',
            'en_cours': 'En cours',
            'resolue': 'Résolue',
            'cloturee': 'Clôturée'
        } %}
        <span class="badge badge-{{ status_class[reclamation.statut]|default('light') }}">
            {{ status_label[reclamation.statut]|default(reclamation.statut) }}
        </span>
    </td>
    <td>
        {% set prio_class = { 'basse': 'light', 'moyenne': 'warning', 'haute': 'danger' } %}
        {% set prio_label = { 'basse': 'Basse', 'moyenne': 'Moyenne', 'haute': 'Haute' } %}
        <span class="badge badge-{{ prio_class[reclamation.priorite]|default('light') }}">
            <i class="fas fa-circle text-xs mr-1"></i> {{ prio_label[reclamation.priorite]|default(reclamation.priorite) }}
        </span>
    </td>
    <td class="text-center">
        <div class="badge badge-light border">{{ reclamation.reponses|length }}</div>
    </td>
    <td class="text-right">
        <div class="btn-group">
            <a href="{{ path('app_reclamation_show', { id: reclamation.id }) }}" class="btn btn-sm btn-light" title="Voir"><i class="fas fa-eye text-primary"></i></a>
            <a href="{{ path('app_reclamation_edit', { id: reclamation.id }) }}" class="btn btn-sm btn-light" title="Modifier"><i class="fas fa-edit text-info"></i></a>
            <form method="post" action="{{ path('app_reclamation_delete', { id: reclamation.id }) }}" style="display:inline-block;" onsubmit="return confirm('Êtes-vous sûr ?');">
                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ reclamation.id) }}">
                <button class="btn btn-sm btn-light" title="Supprimer"><i class="fas fa-trash-alt text-danger"></i></button>
            </form>
        </div>
    </td>
</tr>
{% else %}
<tr><td colspan="8" class="text-center text-muted py-5">Aucune réclamation trouvée.</td></tr>
{% endfor %}
