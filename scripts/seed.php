<?php
// scripts/seed.php - Run with: php scripts/seed.php

require_once __DIR__ . '/../vendor/autoload.php';

use Symfony\Component\Dotenv\Dotenv;

(new Dotenv())->bootEnv(__DIR__ . '/../.env');

$dsn = $_ENV['DATABASE_URL'];

// Parse the DSN
preg_match('#mysql://([^:]*):([^@]*)@([^:]+):(\d+)/([^?]+)#', $dsn, $m);
[, $user, $pass, $host, $port, $dbname] = $m;
$dbname = explode('?', $dbname)[0];

try {
    $pdo = new PDO("mysql:host=$host;port=$port;dbname=$dbname;charset=utf8mb4", $user, $pass ?: null, [
        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
    ]);
    echo "‚úÖ Connected to database: $dbname\n";
} catch (Exception $e) {
    die("‚ùå Connection failed: " . $e->getMessage() . "\n");
}

// ============================================================
// INSERT 35 REPORTS
// ============================================================
$reports = [
    // September 2025
    ['Audit de S√©curit√© R√©seau Q3', 'Analyse compl√®te des vuln√©rabilit√©s du r√©seau interne, des pare-feux et des acc√®s distants VPN durant le troisi√®me trimestre.', 'Critique', 'S√©curit√©', 'Forte', 32, 'admin', '2025-09-05 08:30:00', null],
    ['√âvaluation Conformit√© RGPD Formulaires', 'V√©rification de la conformit√© des formulaires de collecte de donn√©es personnelles avec le r√®glement RGPD.', 'Valid√©', 'Juridique', 'Moyenne', 78, 'admin', '2025-09-12 10:00:00', '2025-09-15'],
    ['Rapport Performance Serveurs Web', "Mesure des temps de r√©ponse, taux d'erreur et disponibilit√© des serveurs web de production.", 'Valid√©', 'Performance', 'Moyenne', 85, 'admin', '2025-09-18 09:15:00', '2025-09-20'],
    ['Contr√¥le Acc√®s Bases de Donn√©es', "Audit des droits d'acc√®s aux bases de donn√©es critiques et v√©rification de la politique des mots de passe.", 'Critique', 'S√©curit√©', 'Forte', 41, 'admin', '2025-09-25 14:00:00', null],

    // October 2025
    ['Audit Financier D√©partement IT', "Analyse des d√©penses IT du trimestre, comparaison avec le budget allou√© et identification des √©carts.", 'Valid√©', 'Financier', 'Basse', 91, 'admin', '2025-10-02 09:00:00', '2025-10-10'],
    ["Plan de Continuit√© Activit√© (PCA)", "√âvaluation du plan de continuit√© d'activit√© et des proc√©dures de reprise apr√®s sinistre.", 'En cours', 'Infrastructure', 'Forte', 55, 'admin', '2025-10-08 11:00:00', null],
    ['Audit S√©curit√© Applicative Mobile', 'Tests de s√©curit√© sur l\'application mobile iOS et Android : injections, authentification, stockage local.', 'Critique', 'S√©curit√©', 'Forte', 29, 'user', '2025-10-15 08:45:00', null],
    ['Conformit√© ISO 27001 ‚Äì Revue Annuelle', 'Revue annuelle de la conformit√© au standard ISO 27001 et identification des √©carts par rapport au r√©f√©rentiel.', 'En cours', 'Conformit√©', 'Moyenne', 67, 'admin', '2025-10-22 13:30:00', null],
    ['Rapport Gestion des Identit√©s (IAM)', 'Analyse du syst√®me de gestion des identit√©s et des acc√®s : provisionnement, d√©-provisionnement, MFA.', 'Valid√©', 'S√©curit√©', 'Moyenne', 80, 'admin', '2025-10-29 10:00:00', '2025-11-02'],

    // November 2025
    ['Audit Infrastructure Cloud AWS', 'Revue de la configuration des services AWS : S3, EC2, IAM policies, groupes de s√©curit√©.', 'Valid√©', 'Infrastructure', 'Forte', 72, 'admin', '2025-11-04 08:00:00', '2025-11-12'],
    ['√âvaluation Risques Fournisseurs Tiers', "Analyse des risques li√©s aux prestataires tiers ayant acc√®s aux syst√®mes d'information de l'entreprise.", 'En cours', 'Juridique', 'Moyenne', 61, 'admin', '2025-11-10 09:30:00', null],
    ['Audit Performance Base de Donn√©es Oracle', "Optimisation des requ√™tes lentes, analyse des index manquants et de la fragmentation des tables.", 'Valid√©', 'Performance', 'Moyenne', 83, 'user', '2025-11-17 11:00:00', '2025-11-20'],
    ['Politique Mots de Passe ‚Äì √âvaluation', 'Revue de la politique de gestion des mots de passe : complexit√©, rotation, stockage s√©curis√©.', 'Critique', 'S√©curit√©', 'Forte', 38, 'admin', '2025-11-24 14:00:00', null],
    ['Conformit√© Donn√©es RH & SIRH', 'V√©rification de la conformit√© du syst√®me RH par rapport aux obligations l√©gales de protection des donn√©es employ√©s.', 'Valid√©', 'Conformit√©', 'Basse', 89, 'admin', '2025-11-28 10:00:00', '2025-12-02'],

    // December 2025
    ['Audit de S√©curit√© P√©rim√©trique Q4', 'Analyse des √©quipements r√©seau en bordure de p√©rim√®tre : routeurs, firewalls, DMZ et IDS/IPS.', 'En cours', 'S√©curit√©', 'Forte', 50, 'admin', '2025-12-01 08:30:00', null],
    ['Rapport Disponibilit√© Infrastructure Q4', 'Mesure des taux de disponibilit√© (SLA) des syst√®mes critiques sur le quatri√®me trimestre.', 'Valid√©', 'Infrastructure', 'Moyenne', 94, 'admin', '2025-12-08 09:00:00', '2025-12-15'],
    ['Revue Code Source Application Web', "Analyse statique et dynamique du code source de l'application web principale pour identifier CVE et OWASP Top 10.", 'Critique', 'S√©curit√©', 'Forte', 35, 'user', '2025-12-10 10:00:00', null],
    ['Contr√¥le Gestion des Patches Syst√®mes', 'V√©rification de l\'application des correctifs de s√©curit√© sur les serveurs Windows et Linux.', 'En cours', 'Infrastructure', 'Forte', 58, 'admin', '2025-12-16 14:00:00', null],
    ['Audit Financier Cl√¥ture Annuelle', 'Revue des proc√©dures de cl√¥ture comptable annuelle et validation des contr√¥les financiers.', 'Valid√©', 'Financier', 'Moyenne', 88, 'admin', '2025-12-20 09:00:00', '2025-12-28'],
    ["Test d'Intrusion Externe Annuel", "Pentest externe commandit√© par la direction : simulation d'attaques depuis Internet vers les syst√®mes expos√©s.", 'Critique', 'S√©curit√©', 'Forte', 27, 'admin', '2025-12-22 08:00:00', null],

    // January 2026
    ['Audit Acc√®s Privil√©gi√©s (PAM)', 'Analyse des comptes administrateurs et super-utilisateurs : journalisation, rotation des credentials, enregistrement de sessions.', 'En cours', 'S√©curit√©', 'Forte', 49, 'admin', '2026-01-06 09:00:00', null],
    ['Rapport Conformit√© PCI-DSS', "√âvaluation de la conformit√© aux exigences PCI-DSS pour les syst√®mes de paiement en ligne.", 'Valid√©', 'Conformit√©', 'Forte', 76, 'admin', '2026-01-10 10:00:00', '2026-01-18'],
    ['√âvaluation S√©curit√© API REST', 'Tests de s√©curit√© sur les API REST expos√©es : authentification OAuth, rate limiting, injection, CORS.', 'Critique', 'S√©curit√©', 'Forte', 33, 'user', '2026-01-14 11:00:00', null],
    ['Performance Applicative ‚Äì Dashboard BI', 'Analyse des temps de chargement et de calcul du tableau de bord Business Intelligence utilis√© par la direction.', 'Valid√©', 'Performance', 'Basse', 90, 'user', '2026-01-20 09:30:00', '2026-01-24'],
    ['Audit Organisation Gestion des Incidents', 'Revue du processus de gestion des incidents de s√©curit√© : d√©tection, classification, escalade, r√©solution.', 'En cours', 'Conformit√©', 'Moyenne', 64, 'admin', '2026-01-27 14:00:00', null],

    // February 2026
    ['Audit S√©curit√© Messagerie & Phishing', "√âvaluation des dispositifs anti-spam, anti-phishing et de sensibilisation des utilisateurs aux attaques par email.", 'Critique', 'S√©curit√©', 'Forte', 43, 'admin', '2026-02-03 08:30:00', null],
    ['Rapport Conformit√© DORA (Digital Ops)', 'Revue de la conformit√© au r√®glement DORA relatif √† la r√©silience op√©rationnelle num√©rique du secteur financier.', 'En cours', 'Juridique', 'Forte', 57, 'admin', '2026-02-06 09:00:00', null],
    ['Audit Sauvegarde et Restauration', 'Tests de restauration des sauvegardes critiques et validation des proc√©dures de reprise apr√®s panne.', 'Valid√©', 'Infrastructure', 'Moyenne', 82, 'admin', '2026-02-10 10:00:00', '2026-02-14'],
    ['Analyse Vuln√©rabilit√©s Front-End', "Scan des vuln√©rabilit√©s XSS, CSRF, clickjacking sur les interfaces utilisateur de l'application principale.", 'En cours', 'S√©curit√©', 'Moyenne', 62, 'user', '2026-02-13 13:00:00', null],
    ['Rapport Bien-√ätre Digital Collaborateurs', "√âtude de l'impact du num√©rique sur la charge de travail, la lisibilit√© des outils et le bien-√™tre des √©quipes.", 'Valid√©', 'RH', 'Basse', 87, 'user', '2026-02-17 09:00:00', '2026-02-20'],
    ['Audit Chiffrement Donn√©es au Repos', "V√©rification du chiffrement des bases de donn√©es, fichiers de configuration et disques des serveurs.", 'Critique', 'S√©curit√©', 'Forte', 31, 'admin', '2026-02-18 08:00:00', null],
    ['Revue Politique de S√©curit√© Globale', "√âvaluation compl√®te de la charte de s√©curit√© de l'information et des proc√©dures op√©rationnelles associ√©es.", 'En cours', 'Conformit√©', 'Moyenne', 68, 'admin', '2026-02-20 09:00:00', null],
    ['Audit Journaux Syst√®mes & SIEM', "Revue de la qualit√© des logs collect√©s et de leur corr√©lation dans le SIEM pour d√©tecter les incidents.", 'En cours', 'Infrastructure', 'Moyenne', 59, 'admin', '2026-02-21 10:00:00', null],
    ['Contr√¥le Antivirus & EDR Endpoints', "V√©rification du d√©ploiement et de l'efficacit√© des solutions antivirus et EDR sur l'ensemble des postes.", 'Valid√©', 'S√©curit√©', 'Forte', 84, 'user', '2026-02-22 08:30:00', '2026-02-24'],
    ['Audit Sensibilisation Cybers√©curit√©', "√âvaluation du programme de formation et de sensibilisation √† la cybers√©curit√© pour les employ√©s.", 'Valid√©', 'RH', 'Basse', 92, 'admin', '2026-02-23 09:00:00', '2026-02-25'],
];

$insertReport = $pdo->prepare(
    "INSERT INTO report (title, description, status, type, priority, score, source, created_at, updated_at, validation_date) VALUES (?,?,?,?,?,?,?,?,?,?)"
);

$reportIdMap = [];
$inserted = 0;
foreach ($reports as $r) {
    [$title, $desc, $status, $type, $priority, $score, $source, $created, $validationDate] = $r;
    $updatedAt = $created;
    if ($validationDate) {
        $updatedAt = $validationDate . ' 14:00:00';
    }
    $insertReport->execute([$title, $desc, $status, $type, $priority, $score, $source, $created, $updatedAt, $validationDate]);
    $reportIdMap[$title] = $pdo->lastInsertId();
    $inserted++;
}

echo "‚úÖ Inserted $inserted reports.\n";

// ============================================================
// INSERT RECOMMENDATIONS
// ============================================================
$recs = [
    ['Audit de S√©curit√© R√©seau Q3', '<strong class="text-dark">Analyse IA (08:30:00)</strong>'."\n\n".'Voici les observations g√©n√©r√©es automatiquement pour cet audit :'."\n\n".'<strong class="text-danger">Alerte Majeure</strong> : Nous avons d√©tect√© des failles critiques (32/100) n√©cessitant une intervention.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">S√©curit√©</span> : Renforcez le chiffrement des logs.'."\n".'- <span class="text-primary font-weight-bold">R√©seau</span> : Scannez les ports ouverts inutilement.'."\n\n".'<span class="text-info font-weight-bold">Top Priorit√©</span> : Traitez ce dossier avant la fin de journ√©e.'."\n\n".'<em class="text-muted">‚Äî IA MindAudit √† votre service.</em>', '2025-09-06 10:00:00'],
    ['Audit de S√©curit√© R√©seau Q3', '<strong class="text-dark">Analyse IA (14:05:00)</strong>'."\n\n".'Synth√®se intelligente des points de contr√¥le :'."\n\n".'<strong class="text-danger">Risque √âlev√©</strong> : La conformit√© (32/100) est compromise. Une action corrective est prioritaire.'."\n\n".'<span class="text-info font-weight-bold">Calendrier</span> : Fixez une √©ch√©ance de rem√©diation √† J+7.'."\n\n".'<em class="text-muted">‚Äî Action recommand√©e suite √† cette analyse.</em>', '2025-09-07 14:05:00'],
    ['√âvaluation Conformit√© RGPD Formulaires', '<strong class="text-dark">Analyse IA (11:00:00)</strong>'."\n\n".'Bas√© sur les donn√©es du rapport, voici nos conseils :'."\n\n".'<strong class="text-warning">Score Moyen</strong> (78/100) : Des axes d\'am√©lioration ont √©t√© identifi√©s pour stabiliser l\'audit.'."\n\n".'<span class="text-info font-weight-bold">√âquipe</span> : Demandez une contre-expertise √† un coll√®gue.'."\n\n".'<em class="text-muted">‚Äî Bonne mise en ≈ìuvre des recommandations.</em>', '2025-09-13 11:00:00'],
    ['Rapport Performance Serveurs Web', '<strong class="text-dark">Analyse IA (09:30:00)</strong>'."\n\n".'Examen des indicateurs de performance termin√© :'."\n\n".'<strong class="text-success">Excellente Performance</strong> : Score de 85/100. Les standards sont parfaitement respect√©s.'."\n\n".'<span class="text-info font-weight-bold">Technique</span> : Lancez un diagnostic approfondi du sous-syst√®me.'."\n\n".'<em class="text-muted">‚Äî Fin de la synth√®se IA.</em>', '2025-09-19 09:30:00'],
    ['Contr√¥le Acc√®s Bases de Donn√©es', '<strong class="text-dark">Analyse IA (15:00:00)</strong>'."\n\n".'L\'analyse IA de ce rapport r√©v√®le les points suivants :'."\n\n".'<strong class="text-danger">Situation Critique</strong> : Le score de 41/100 est bien en dessous des seuils de s√©curit√©.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">Acc√®s</span> : Supprimez les comptes inactifs imm√©diatement.'."\n".'- <span class="text-primary font-weight-bold">Donn√©es</span> : Testez l\'int√©grit√© des backups.'."\n\n".'<span class="text-info font-weight-bold">Top Priorit√©</span> : Traitez ce dossier avant la fin de journ√©e.'."\n\n".'<em class="text-muted">‚Äî IA MindAudit √† votre service.</em>', '2025-09-26 15:00:00'],
    ['Audit Financier D√©partement IT', '<strong class="text-dark">Analyse IA (10:00:00)</strong>'."\n\n".'Synth√®se intelligente des points de contr√¥le :'."\n\n".'<strong class="text-success">R√©sultat Optimal</strong> : F√©licitations pour ce score de 91/100.'."\n\n".'<span class="text-info font-weight-bold">Calendrier</span> : Fixez une √©ch√©ance de rem√©diation √† J+7.'."\n\n".'<em class="text-muted">‚Äî Bonne mise en ≈ìuvre des recommandations.</em>', '2025-10-03 10:00:00'],
    ['Plan de Continuit√© Activit√© (PCA)', '<strong class="text-dark">Analyse IA (11:30:00)</strong>'."\n\n".'Voici les observations g√©n√©r√©es automatiquement pour cet audit :'."\n\n".'<strong class="text-warning">Avertissement</strong> : Avec 55/100, la situation est sous contr√¥le mais fragile.'."\n\n".'<span class="text-info font-weight-bold">√âquipe</span> : Demandez une contre-expertise √† un coll√®gue.'."\n\n".'<em class="text-muted">‚Äî Nous restons en veille sur ce dossier.</em>', '2025-10-09 11:30:00'],
    ['Audit S√©curit√© Applicative Mobile', '<strong class="text-dark">Analyse IA (09:00:00)</strong>'."\n\n".'Synth√®se intelligente des points de contr√¥le :'."\n\n".'<strong class="text-danger">Alerte Syst√®me</strong> : Score de 29/100. Les protocoles standards ne sont pas respect√©s.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">S√©curit√©</span> : Changez les cl√©s d\'acc√®s p√©riodiquement.'."\n".'- <span class="text-primary font-weight-bold">Acc√®s</span> : Activez l\'authentification double facteur.'."\n\n".'<span class="text-info font-weight-bold">Top Priorit√©</span> : Traitez ce dossier avant la fin de journ√©e.'."\n\n".'<em class="text-muted">‚Äî IA MindAudit √† votre service.</em>', '2025-10-16 09:00:00'],
    ['Audit S√©curit√© Applicative Mobile', '<strong class="text-dark">Analyse IA (16:00:00)</strong>'."\n\n".'Bas√© sur les donn√©es du rapport, voici nos conseils :'."\n\n".'<strong class="text-danger">Alerte Majeure</strong> : Nous avons d√©tect√© des failles critiques (29/100) n√©cessitant une intervention.'."\n\n".'<span class="text-info font-weight-bold">Technique</span> : Lancez un diagnostic approfondi du sous-syst√®me.'."\n\n".'<em class="text-muted">‚Äî Action recommand√©e suite √† cette analyse.</em>', '2025-10-17 16:00:00'],
    ['Conformit√© ISO 27001 ‚Äì Revue Annuelle', '<strong class="text-dark">Analyse IA (14:00:00)</strong>'."\n\n".'Examen des indicateurs de performance termin√© :'."\n\n".'<strong class="text-warning">Note de Vigilance</strong> : Le r√©sultat de 67/100 sugg√®re un besoin de documentation suppl√©mentaire.'."\n\n".'<span class="text-info font-weight-bold">Calendrier</span> : Fixez une √©ch√©ance de rem√©diation √† J+7.'."\n\n".'<em class="text-muted">‚Äî Nous restons en veille sur ce dossier.</em>', '2025-10-23 14:00:00'],
    ['Rapport Gestion des Identit√©s (IAM)', '<strong class="text-dark">Analyse IA (11:00:00)</strong>'."\n\n".'L\'analyse IA de ce rapport r√©v√®le les points suivants :'."\n\n".'<strong class="text-success">Validation</strong> : Votre score de 80/100 d√©montre une gestion rigoureuse des processus.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">Acc√®s</span> : V√©rifiez la hi√©rarchie des permissions.'."\n\n".'<span class="text-info font-weight-bold">√âquipe</span> : Demandez une contre-expertise √† un coll√®gue.'."\n\n".'<em class="text-muted">‚Äî Fin de la synth√®se IA.</em>', '2025-10-30 11:00:00'],
    ['Audit Infrastructure Cloud AWS', '<strong class="text-dark">Analyse IA (09:00:00)</strong>'."\n\n".'Voici les observations g√©n√©r√©es automatiquement pour cet audit :'."\n\n".'<strong class="text-warning">Diagnostic</strong> : Performance de 72/100. Une surveillance accrue est recommand√©e.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">S√©curit√©</span> : Auditez les acc√®s p√©rim√©triques.'."\n".'- <span class="text-primary font-weight-bold">R√©seau</span> : Isolez les segments de production.'."\n\n".'<span class="text-info font-weight-bold">Technique</span> : Lancez un diagnostic approfondi du sous-syst√®me.'."\n\n".'<em class="text-muted">‚Äî IA MindAudit √† votre service.</em>', '2025-11-05 09:00:00'],
    ['Audit Infrastructure Cloud AWS', '<strong class="text-dark">Analyse IA (15:30:00)</strong>'."\n\n".'Synth√®se intelligente des points de contr√¥le :'."\n\n".'<strong class="text-warning">Score Moyen</strong> (72/100) : Des axes d\'am√©lioration ont √©t√© identifi√©s.'."\n\n".'<span class="text-info font-weight-bold">Calendrier</span> : Fixez une √©ch√©ance de rem√©diation √† J+7.'."\n\n".'<em class="text-muted">‚Äî Bonne mise en ≈ìuvre des recommandations.</em>', '2025-11-06 15:30:00'],
    ['√âvaluation Risques Fournisseurs Tiers', '<strong class="text-dark">Analyse IA (10:00:00)</strong>'."\n\n".'Bas√© sur les donn√©es du rapport, voici nos conseils :'."\n\n".'<strong class="text-warning">Avertissement</strong> : Avec 61/100, la situation est sous contr√¥le mais fragile.'."\n\n".'<span class="text-info font-weight-bold">√âquipe</span> : Demandez une contre-expertise √† un coll√®gue.'."\n\n".'<em class="text-muted">‚Äî Nous restons en veille sur ce dossier.</em>', '2025-11-11 10:00:00'],
    ['Audit Performance Base de Donn√©es Oracle', '<strong class="text-dark">Analyse IA (12:00:00)</strong>'."\n\n".'Examen des indicateurs de performance termin√© :'."\n\n".'<strong class="text-success">Succ√®s</strong> : Conformit√© totale identifi√©e (83/100). Aucun √©cart majeur d√©tect√©.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">Donn√©es</span> : V√©rifiez la coh√©rence des flux entrants.'."\n\n".'<span class="text-info font-weight-bold">Technique</span> : Lancez un diagnostic approfondi du sous-syst√®me.'."\n\n".'<em class="text-muted">‚Äî Fin de la synth√®se IA.</em>', '2025-11-18 12:00:00'],
    ['Politique Mots de Passe ‚Äì √âvaluation', '<strong class="text-dark">Analyse IA (15:00:00)</strong>'."\n\n".'L\'analyse IA de ce rapport r√©v√®le les points suivants :'."\n\n".'<strong class="text-danger">Situation Critique</strong> : Le score de 38/100 est bien en dessous des seuils de s√©curit√©.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">Acc√®s</span> : Activez l\'authentification double facteur.'."\n".'- <span class="text-primary font-weight-bold">S√©curit√©</span> : Changez les cl√©s d\'acc√®s p√©riodiquement.'."\n\n".'<span class="text-info font-weight-bold">Top Priorit√©</span> : Traitez ce dossier avant la fin de journ√©e.'."\n\n".'<em class="text-muted">‚Äî IA MindAudit √† votre service.</em>', '2025-11-25 15:00:00'],
    ['Politique Mots de Passe ‚Äì √âvaluation', '<strong class="text-dark">Analyse IA (09:30:00)</strong>'."\n\n".'Synth√®se intelligente des points de contr√¥le :'."\n\n".'<strong class="text-danger">Alerte Majeure</strong> : Nous avons d√©tect√© des failles critiques (38/100) n√©cessitant une intervention imm√©diate.'."\n\n".'<span class="text-info font-weight-bold">Calendrier</span> : Fixez une √©ch√©ance de rem√©diation √† J+7.'."\n\n".'<em class="text-muted">‚Äî Action recommand√©e suite √† cette analyse.</em>', '2025-11-26 09:30:00'],
    ['Conformit√© Donn√©es RH & SIRH', '<strong class="text-dark">Analyse IA (10:30:00)</strong>'."\n\n".'Voici les observations g√©n√©r√©es automatiquement pour cet audit :'."\n\n".'<strong class="text-success">R√©sultat Optimal</strong> : F√©licitations pour ce score de 89/100.'."\n\n".'<span class="text-info font-weight-bold">√âquipe</span> : Demandez une contre-expertise √† un coll√®gue.'."\n\n".'<em class="text-muted">‚Äî Bonne mise en ≈ìuvre des recommandations.</em>', '2025-11-29 10:30:00'],
    ['Audit de S√©curit√© P√©rim√©trique Q4', '<strong class="text-dark">Analyse IA (09:00:00)</strong>'."\n\n".'Bas√© sur les donn√©es du rapport, voici nos conseils :'."\n\n".'<strong class="text-warning">Avertissement</strong> : Avec 50/100, la situation est sous contr√¥le mais fragile.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">R√©seau</span> : Optimisez la latence des points de terminaison.'."\n".'- <span class="text-primary font-weight-bold">S√©curit√©</span> : Renforcez le chiffrement des logs.'."\n\n".'<span class="text-info font-weight-bold">Technique</span> : Lancez un diagnostic approfondi du sous-syst√®me.'."\n\n".'<em class="text-muted">‚Äî Nous restons en veille sur ce dossier.</em>', '2025-12-02 09:00:00'],
    ['Rapport Disponibilit√© Infrastructure Q4', '<strong class="text-dark">Analyse IA (10:00:00)</strong>'."\n\n".'Examen des indicateurs de performance termin√© :'."\n\n".'<strong class="text-success">Excellente Performance</strong> : Score de 94/100. Les standards sont parfaitement respect√©s.'."\n\n".'<span class="text-info font-weight-bold">Calendrier</span> : Fixez une √©ch√©ance de rem√©diation √† J+7.'."\n\n".'<em class="text-muted">‚Äî Fin de la synth√®se IA.</em>', '2025-12-09 10:00:00'],
    ['Revue Code Source Application Web', '<strong class="text-dark">Analyse IA (11:00:00)</strong>'."\n\n".'L\'analyse IA de ce rapport r√©v√®le les points suivants :'."\n\n".'<strong class="text-danger">Alerte Syst√®me</strong> : Score de 35/100. Les protocoles standards ne sont pas respect√©s.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">S√©curit√©</span> : Auditez les acc√®s p√©rim√©triques.'."\n".'- <span class="text-primary font-weight-bold">Acc√®s</span> : V√©rifiez la hi√©rarchie des permissions.'."\n\n".'<span class="text-info font-weight-bold">Top Priorit√©</span> : Traitez ce dossier avant la fin de journ√©e.'."\n\n".'<em class="text-muted">‚Äî IA MindAudit √† votre service.</em>', '2025-12-11 11:00:00'],
    ['Revue Code Source Application Web', '<strong class="text-dark">Analyse IA (16:30:00)</strong>'."\n\n".'Synth√®se intelligente des points de contr√¥le :'."\n\n".'<strong class="text-danger">Risque √âlev√©</strong> : La conformit√© (35/100) est compromise. Une action corrective est prioritaire.'."\n\n".'<span class="text-info font-weight-bold">√âquipe</span> : Demandez une contre-expertise √† un coll√®gue.'."\n\n".'<em class="text-muted">‚Äî Action recommand√©e suite √† cette analyse.</em>', '2025-12-12 16:30:00'],
    ['Contr√¥le Gestion des Patches Syst√®mes', '<strong class="text-dark">Analyse IA (15:00:00)</strong>'."\n\n".'Voici les observations g√©n√©r√©es automatiquement pour cet audit :'."\n\n".'<strong class="text-warning">Diagnostic</strong> : Performance de 58/100. Une surveillance accrue est recommand√©e.'."\n\n".'<span class="text-info font-weight-bold">Technique</span> : Lancez un diagnostic approfondi du sous-syst√®me.'."\n\n".'<em class="text-muted">‚Äî Nous restons en veille sur ce dossier.</em>', '2025-12-17 15:00:00'],
    ['Audit Financier Cl√¥ture Annuelle', '<strong class="text-dark">Analyse IA (10:00:00)</strong>'."\n\n".'Examen des indicateurs de performance termin√© :'."\n\n".'<strong class="text-success">Succ√®s</strong> : Conformit√© totale identifi√©e (88/100). Aucun √©cart majeur d√©tect√©.'."\n\n".'<span class="text-info font-weight-bold">Calendrier</span> : Fixez une √©ch√©ance de rem√©diation √† J+7.'."\n\n".'<em class="text-muted">‚Äî Bonne mise en ≈ìuvre des recommandations.</em>', '2025-12-21 10:00:00'],
    ["Test d'Intrusion Externe Annuel", '<strong class="text-dark">Analyse IA (09:00:00)</strong>'."\n\n".'Bas√© sur les donn√©es du rapport, voici nos conseils :'."\n\n".'<strong class="text-danger">Alerte Majeure</strong> : Nous avons d√©tect√© des failles critiques (27/100) n√©cessitant une intervention imm√©diate.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">R√©seau</span> : Scannez les ports ouverts inutilement.'."\n".'- <span class="text-primary font-weight-bold">S√©curit√©</span> : Renforcez le chiffrement des logs.'."\n".'- <span class="text-primary font-weight-bold">Acc√®s</span> : Supprimez les comptes inactifs imm√©diatement.'."\n\n".'<span class="text-info font-weight-bold">Top Priorit√©</span> : Traitez ce dossier avant la fin de journ√©e.'."\n\n".'<em class="text-muted">‚Äî IA MindAudit √† votre service.</em>', '2025-12-23 09:00:00'],
    ["Test d'Intrusion Externe Annuel", '<strong class="text-dark">Analyse IA (14:00:00)</strong>'."\n\n".'Synth√®se intelligente des points de contr√¥le :'."\n\n".'<strong class="text-danger">Situation Critique</strong> : Le score de 27/100 est bien en dessous des seuils de s√©curit√©.'."\n\n".'<span class="text-info font-weight-bold">Technique</span> : Lancez un diagnostic approfondi du sous-syst√®me.'."\n\n".'<em class="text-muted">‚Äî Action recommand√©e suite √† cette analyse.</em>', '2025-12-24 14:00:00'],
    ['Audit Acc√®s Privil√©gi√©s (PAM)', '<strong class="text-dark">Analyse IA (10:00:00)</strong>'."\n\n".'L\'analyse IA de ce rapport r√©v√®le les points suivants :'."\n\n".'<strong class="text-warning">Avertissement</strong> : Avec 49/100, la situation est sous contr√¥le mais fragile.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">Acc√®s</span> : Activez l\'authentification double facteur.'."\n\n".'<span class="text-info font-weight-bold">Calendrier</span> : Fixez une √©ch√©ance de rem√©diation √† J+7.'."\n\n".'<em class="text-muted">‚Äî Nous restons en veille sur ce dossier.</em>', '2026-01-07 10:00:00'],
    ['Rapport Conformit√© PCI-DSS', '<strong class="text-dark">Analyse IA (11:00:00)</strong>'."\n\n".'Voici les observations g√©n√©r√©es automatiquement pour cet audit :'."\n\n".'<strong class="text-warning">Diagnostic</strong> : Performance de 76/100. Une surveillance accrue est recommand√©e.'."\n\n".'<span class="text-info font-weight-bold">√âquipe</span> : Demandez une contre-expertise √† un coll√®gue.'."\n\n".'<em class="text-muted">‚Äî Fin de la synth√®se IA.</em>', '2026-01-11 11:00:00'],
    ['Rapport Conformit√© PCI-DSS', '<strong class="text-dark">Analyse IA (15:00:00)</strong>'."\n\n".'Examen des indicateurs de performance termin√© :'."\n\n".'<strong class="text-warning">Score Moyen</strong> (76/100) : Des axes d\'am√©lioration ont √©t√© identifi√©s pour stabiliser l\'audit.'."\n\n".'<span class="text-info font-weight-bold">Technique</span> : Lancez un diagnostic approfondi du sous-syst√®me.'."\n\n".'<em class="text-muted">‚Äî Bonne mise en ≈ìuvre des recommandations.</em>', '2026-01-12 15:00:00'],
    ['√âvaluation S√©curit√© API REST', '<strong class="text-dark">Analyse IA (12:00:00)</strong>'."\n\n".'Synth√®se intelligente des points de contr√¥le :'."\n\n".'<strong class="text-danger">Alerte Syst√®me</strong> : Score de 33/100. Les protocoles standards ne sont pas respect√©s.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">S√©curit√©</span> : Auditez les acc√®s p√©rim√©triques.'."\n".'- <span class="text-primary font-weight-bold">Acc√®s</span> : V√©rifiez la hi√©rarchie des permissions.'."\n\n".'<span class="text-info font-weight-bold">Top Priorit√©</span> : Traitez ce dossier avant la fin de journ√©e.'."\n\n".'<em class="text-muted">‚Äî IA MindAudit √† votre service.</em>', '2026-01-15 12:00:00'],
    ['Performance Applicative ‚Äì Dashboard BI', '<strong class="text-dark">Analyse IA (10:00:00)</strong>'."\n\n".'Bas√© sur les donn√©es du rapport, voici nos conseils :'."\n\n".'<strong class="text-success">R√©sultat Optimal</strong> : F√©licitations pour ce score de 90/100.'."\n\n".'<span class="text-info font-weight-bold">Calendrier</span> : Fixez une √©ch√©ance de rem√©diation √† J+7.'."\n\n".'<em class="text-muted">‚Äî Bonne mise en ≈ìuvre des recommandations.</em>', '2026-01-21 10:00:00'],
    ['Audit Organisation Gestion des Incidents', '<strong class="text-dark">Analyse IA (15:00:00)</strong>'."\n\n".'L\'analyse IA de ce rapport r√©v√®le les points suivants :'."\n\n".'<strong class="text-warning">Note de Vigilance</strong> : Le r√©sultat de 64/100 sugg√®re un besoin de documentation suppl√©mentaire.'."\n\n".'<span class="text-info font-weight-bold">√âquipe</span> : Demandez une contre-expertise √† un coll√®gue.'."\n\n".'<em class="text-muted">‚Äî Nous restons en veille sur ce dossier.</em>', '2026-01-28 15:00:00'],
    ['Audit S√©curit√© Messagerie & Phishing', '<strong class="text-dark">Analyse IA (09:30:00)</strong>'."\n\n".'Voici les observations g√©n√©r√©es automatiquement pour cet audit :'."\n\n".'<strong class="text-danger">Situation Critique</strong> : Le score de 43/100 est bien en dessous des seuils de s√©curit√©.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">S√©curit√©</span> : Renforcez le chiffrement des logs.'."\n".'- <span class="text-primary font-weight-bold">Acc√®s</span> : Activez l\'authentification double facteur.'."\n\n".'<span class="text-info font-weight-bold">Top Priorit√©</span> : Traitez ce dossier avant la fin de journ√©e.'."\n\n".'<em class="text-muted">‚Äî IA MindAudit √† votre service.</em>', '2026-02-04 09:30:00'],
    ['Audit S√©curit√© Messagerie & Phishing', '<strong class="text-dark">Analyse IA (14:00:00)</strong>'."\n\n".'Synth√®se intelligente des points de contr√¥le :'."\n\n".'<strong class="text-danger">Alerte Majeure</strong> : Nous avons d√©tect√© des failles critiques (43/100) n√©cessitant une intervention.'."\n\n".'<span class="text-info font-weight-bold">Calendrier</span> : Fixez une √©ch√©ance de rem√©diation √† J+7.'."\n\n".'<em class="text-muted">‚Äî Action recommand√©e suite √† cette analyse.</em>', '2026-02-05 14:00:00'],
    ['Rapport Conformit√© DORA (Digital Ops)', '<strong class="text-dark">Analyse IA (10:00:00)</strong>'."\n\n".'Examen des indicateurs de performance termin√© :'."\n\n".'<strong class="text-warning">Avertissement</strong> : Avec 57/100, la situation est sous contr√¥le mais fragile.'."\n\n".'<span class="text-info font-weight-bold">√âquipe</span> : Demandez une contre-expertise √† un coll√®gue.'."\n\n".'<em class="text-muted">‚Äî Nous restons en veille sur ce dossier.</em>', '2026-02-07 10:00:00'],
    ['Audit Sauvegarde et Restauration', '<strong class="text-dark">Analyse IA (11:00:00)</strong>'."\n\n".'Bas√© sur les donn√©es du rapport, voici nos conseils :'."\n\n".'<strong class="text-success">Succ√®s</strong> : Conformit√© totale identifi√©e (82/100). Aucun √©cart majeur d√©tect√©.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">Donn√©es</span> : Archivez les historiques de plus de 2 ans.'."\n\n".'<span class="text-info font-weight-bold">Technique</span> : Lancez un diagnostic approfondi du sous-syst√®me.'."\n\n".'<em class="text-muted">‚Äî Fin de la synth√®se IA.</em>', '2026-02-11 11:00:00'],
    ['Analyse Vuln√©rabilit√©s Front-End', '<strong class="text-dark">Analyse IA (14:00:00)</strong>'."\n\n".'L\'analyse IA de ce rapport r√©v√®le les points suivants :'."\n\n".'<strong class="text-warning">Score Moyen</strong> (62/100) : Des axes d\'am√©lioration ont √©t√© identifi√©s pour stabiliser l\'audit.'."\n\n".'<span class="text-info font-weight-bold">Calendrier</span> : Fixez une √©ch√©ance de rem√©diation √† J+7.'."\n\n".'<em class="text-muted">‚Äî Bonne mise en ≈ìuvre des recommandations.</em>', '2026-02-14 14:00:00'],
    ['Rapport Bien-√ätre Digital Collaborateurs', '<strong class="text-dark">Analyse IA (10:00:00)</strong>'."\n\n".'Voici les observations g√©n√©r√©es automatiquement pour cet audit :'."\n\n".'<strong class="text-success">Excellente Performance</strong> : Score de 87/100. Les standards sont parfaitement respect√©s.'."\n\n".'<span class="text-info font-weight-bold">√âquipe</span> : Demandez une contre-expertise √† un coll√®gue.'."\n\n".'<em class="text-muted">‚Äî Bonne mise en ≈ìuvre des recommandations.</em>', '2026-02-18 10:00:00'],
    ['Audit Chiffrement Donn√©es au Repos', '<strong class="text-dark">Analyse IA (09:00:00)</strong>'."\n\n".'Synth√®se intelligente des points de contr√¥le :'."\n\n".'<strong class="text-danger">Alerte Syst√®me</strong> : Score de 31/100. Les protocoles standards ne sont pas respect√©s.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">Donn√©es</span> : Testez l\'int√©grit√© des backups.'."\n".'- <span class="text-primary font-weight-bold">S√©curit√©</span> : Renforcez le chiffrement des logs.'."\n".'- <span class="text-primary font-weight-bold">Acc√®s</span> : Supprimez les comptes inactifs imm√©diatement.'."\n\n".'<span class="text-info font-weight-bold">Top Priorit√©</span> : Traitez ce dossier avant la fin de journ√©e.'."\n\n".'<em class="text-muted">‚Äî IA MindAudit √† votre service.</em>', '2026-02-19 09:00:00'],
    ['Audit Chiffrement Donn√©es au Repos', '<strong class="text-dark">Analyse IA (16:00:00)</strong>'."\n\n".'Examen des indicateurs de performance termin√© :'."\n\n".'<strong class="text-danger">Risque √âlev√©</strong> : La conformit√© (31/100) est compromise. Une action corrective est prioritaire.'."\n\n".'<span class="text-info font-weight-bold">Technique</span> : Lancez un diagnostic approfondi du sous-syst√®me.'."\n\n".'<em class="text-muted">‚Äî Action recommand√©e suite √† cette analyse.</em>', '2026-02-20 16:00:00'],
    ['Revue Politique de S√©curit√© Globale', '<strong class="text-dark">Analyse IA (10:30:00)</strong>'."\n\n".'Voici les observations g√©n√©r√©es automatiquement pour cet audit :'."\n\n".'<strong class="text-warning">Note de Vigilance</strong> : Le r√©sultat de 68/100 sugg√®re un besoin de documentation suppl√©mentaire.'."\n\n".'<span class="text-info font-weight-bold">Calendrier</span> : Fixez une √©ch√©ance de rem√©diation √† J+7.'."\n\n".'<em class="text-muted">‚Äî Nous restons en veille sur ce dossier.</em>', '2026-02-21 10:30:00'],
    ['Audit Journaux Syst√®mes & SIEM', '<strong class="text-dark">Analyse IA (11:00:00)</strong>'."\n\n".'Bas√© sur les donn√©es du rapport, voici nos conseils :'."\n\n".'<strong class="text-warning">Avertissement</strong> : Avec 59/100, la situation est sous contr√¥le mais fragile.'."\n\n".'<strong>Focus sp√©cifique :</strong>'."\n".'- <span class="text-primary font-weight-bold">S√©curit√©</span> : Auditez les acc√®s p√©rim√©triques.'."\n\n".'<span class="text-info font-weight-bold">√âquipe</span> : Demandez une contre-expertise √† un coll√®gue.'."\n\n".'<em class="text-muted">‚Äî Fin de la synth√®se IA.</em>', '2026-02-22 11:00:00'],
    ['Contr√¥le Antivirus & EDR Endpoints', '<strong class="text-dark">Analyse IA (09:00:00)</strong>'."\n\n".'L\'analyse IA de ce rapport r√©v√®le les points suivants :'."\n\n".'<strong class="text-success">Succ√®s</strong> : Conformit√© totale identifi√©e (84/100). Aucun √©cart majeur d√©tect√©.'."\n\n".'<span class="text-info font-weight-bold">Technique</span> : Lancez un diagnostic approfondi du sous-syst√®me.'."\n\n".'<em class="text-muted">‚Äî Bonne mise en ≈ìuvre des recommandations.</em>', '2026-02-23 09:00:00'],
    ['Audit Sensibilisation Cybers√©curit√©', '<strong class="text-dark">Analyse IA (10:00:00)</strong>'."\n\n".'Examen des indicateurs de performance termin√© :'."\n\n".'<strong class="text-success">R√©sultat Optimal</strong> : F√©licitations pour ce score de 92/100.'."\n\n".'<span class="text-info font-weight-bold">Calendrier</span> : Fixez une √©ch√©ance de rem√©diation √† J+7.'."\n\n".'<em class="text-muted">‚Äî IA MindAudit √† votre service.</em>', '2026-02-24 10:00:00'],
];

$insertRec = $pdo->prepare("INSERT INTO recommendation (content, created_at, report_id) VALUES (?, ?, ?)");

$recInserted = 0;
foreach ($recs as [$reportTitle, $content, $createdAt]) {
    if (!isset($reportIdMap[$reportTitle])) {
        echo "‚ö†Ô∏è  Report not found for rec: $reportTitle\n";
        continue;
    }
    $insertRec->execute([$content, $createdAt, $reportIdMap[$reportTitle]]);
    $recInserted++;
}

echo "‚úÖ Inserted $recInserted recommendations.\n";
echo "\nüéâ Seed completed! Total: $inserted reports + $recInserted recommendations.\n";
